:root{
  --brand:#0f766e;
  --brand2:#0ea5a5;
  --bg:#f5f7fb;
  --paper:#ffffff;
  --ink:#0b1220;
  --muted:#5b6472;
  --line:rgba(15,23,42,.14);
  --shadow:0 12px 40px rgba(2,6,23,.10);
  --shadow2:0 18px 55px rgba(2,6,23,.12);
  --radius:18px;
  --navH:68px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans JP", sans-serif;
  color:var(--ink);
  background:var(--bg);
  line-height:1.75;
}
a{color:var(--brand);text-decoration:none}
a:hover{text-decoration:underline}

.topnav{
  position:sticky; top:0; z-index:50;
  height:var(--navH);
  background:rgba(255,255,255,.86);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--line);
}
.topnav .inner{
  max-width:1200px;margin:0 auto;height:100%;
  padding:0 16px;
  display:flex;align-items:center;justify-content:space-between;gap:14px;
}
.brand{
  display:flex;align-items:center;gap:12px;min-width:0;color:var(--ink);
}
.brand:hover{text-decoration:none}
.mark{
  width:36px;height:36px;border-radius:12px;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  box-shadow:0 10px 26px rgba(14,165,165,.18);
  flex:0 0 auto;
}
.brand .t{display:flex;flex-direction:column;gap:0;min-width:0}
.brand b{font-size:14px;letter-spacing:.02em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.brand small{font-size:12px;color:var(--muted)}

.navlinks{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.navlinks a{color:var(--ink);opacity:.88;font-size:14px}
.navlinks a:hover{opacity:1;text-decoration:none}

.navbtn{
  font-size:13px;color:var(--paper);
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  padding:10px 12px;border-radius:999px;
  box-shadow:0 12px 28px rgba(15,118,110,.20);
  white-space:nowrap;
}
.navbtn:hover{text-decoration:none;filter:brightness(.98)}

.menuBtn{
  display:none;
  border:1px solid var(--line);
  background:rgba(255,255,255,.7);
  padding:10px 12px;border-radius:12px;
  font-size:13px;color:var(--ink);
}
.menuBtn:hover{cursor:pointer}
@media (max-width:980px){
  .navlinks{display:none}
  .menuBtn{display:inline-flex;align-items:center;gap:8px}
}

.drawer{
  display:none;
  position:fixed; inset:0;
  background:rgba(2,6,23,.38);
  z-index:80;
}
.drawer .panel{
  position:absolute; top:0; right:0; height:100%;
  width:min(360px,92vw);
  background:var(--paper);
  border-left:1px solid var(--line);
  box-shadow: var(--shadow2);
  padding:14px;
}
.drawer .panel h3{margin:8px 0 8px;font-size:14px;color:var(--muted)}
.drawer a{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 12px; border-radius:12px;
  border:1px solid var(--line);
  color:var(--ink);
  margin:10px 0;
}
.drawer a:hover{text-decoration:none;box-shadow:var(--shadow)}
.drawer .close{
  width:100%;
  border:1px solid var(--line);
  background:#fff;
  padding:10px 12px;border-radius:12px;
  margin-top:12px;
}
.drawer .close:hover{cursor:pointer}

.hero{
  height:min(64vh,640px);
  position:relative;
  overflow:hidden;
  background:
    linear-gradient(90deg, rgba(2,6,23,.70) 0%, rgba(2,6,23,.48) 22%, rgba(2,6,23,.05) 56%, rgba(2,6,23,.00) 100%),
    var(--hero) center/cover no-repeat;
}
.hero .inner{
  max-width:1200px;margin:0 auto;padding:22px 16px;
  height:100%;
  display:flex;align-items:flex-end;
}
.heroBox{
  width:min(680px,94vw);
  color:#fff;
  padding:18px 18px 16px;
  border-radius:22px;
  background:rgba(2,6,23,.42);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 30px 80px rgba(0,0,0,.28);
  backdrop-filter: blur(8px);
}
.heroBox .k{font-size:12px;letter-spacing:.14em;opacity:.92}
.heroBox h1{margin:10px 0 8px;font-size:36px;line-height:1.08;letter-spacing:.04em}
.heroBox p{margin:0;color:rgba(255,255,255,.88);font-size:14px}
.heroActions{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap}
.ghost{
  display:inline-flex;align-items:center;justify-content:center;
  border:1px solid rgba(255,255,255,.22);
  padding:10px 12px;border-radius:999px;
  color:#fff;font-size:13px;
  background:rgba(255,255,255,.08);
}
.ghost:hover{text-decoration:none;background:rgba(255,255,255,.12)}

main{max-width:1200px;margin:0 auto;padding:16px}
.grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:16px}
@media (max-width:980px){.grid{grid-template-columns:1fr;margin-top:16px}}
.card{
  background:var(--paper);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow);
}
.card h2{margin:0 0 10px;font-size:16px}
.small{font-size:12px;color:var(--muted)}
ul{margin:8px 0 0;padding-left:18px}
li{margin:6px 0}
.split{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:820px){.split{grid-template-columns:1fr}}
.pill{
  display:inline-block;
  font-size:12px;color:var(--brand);
  border:1px solid rgba(15,118,110,.22);
  padding:3px 10px;border-radius:999px;
  background:rgba(14,165,165,.06);
  margin-right:6px;
}

.quick{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
@media (max-width:980px){.quick{grid-template-columns:repeat(2,1fr)}}
.qitem{
  display:block;
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px;
  background:linear-gradient(180deg,#ffffff,#f8fafc);
  box-shadow:var(--shadow);
  color:var(--ink);
}
.qitem:hover{text-decoration:none;box-shadow:var(--shadow2)}
.qitem b{display:block;font-size:14px;margin-bottom:4px}
.qitem span{display:block;font-size:12px;color:var(--muted)}

.two{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media (max-width:980px){.two{grid-template-columns:1fr}}

.footer{
  padding:18px 0 22px;color:var(--muted);
  font-size:12px;text-align:center
}


/* anchor offset for sticky nav */
[id]{scroll-margin-top: calc(var(--navH) + 12px);}

/* site search in top nav */
.nav-search{margin-left:12px;display:flex;align-items:center}
.nav-search input{
  width:220px;max-width:32vw;
  padding:8px 10px;border-radius:999px;
  border:1px solid rgba(15,23,42,.16);
  background:#fff;
  font-size:14px;
}
@media (max-width:980px){
  .nav-search{display:none}
}

.searchbox{display:flex;gap:10px;align-items:center}
.searchbox input{flex:1;min-width:0;padding:10px 12px;border-radius:12px;border:1px solid rgba(15,23,42,.16)}
.searchbox .btn{padding:10px 14px;border-radius:12px;border:1px solid rgba(15,23,42,.16);background:#0f766e;color:#fff}


/* ===== search page ===== */
.searchList{margin:10px 0 0; padding-left:18px}
.searchList li{margin:8px 0}
.hintBox{
  margin-top:10px;
  padding:12px 12px;
  border:1px solid var(--line);
  border-radius:14px;
  background:rgba(255,255,255,.7);
}
.ghost{
  letter-spacing:.08em;
  text-decoration:none;
}
.ghost:hover{text-decoration:underline}
.tiny{font-size:12px;color:var(--muted);margin-top:8px}
.nav-search{
  display:flex;align-items:center;
  padding:6px 10px;border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.78);
}
.nav-search input{
  border:0;outline:0;background:transparent;
  width:180px; max-width:28vw;
  font-size:14px;
}
@media (max-width:720px){
  .navlinks{gap:10px}
  .nav-search{width:100%}
  .nav-search input{width:100%}
}


/* ===== time-slip gate visual ===== */
.ghost{
  position:relative;
  display:inline-block;
  color:rgba(10, 30, 35, .92);
  text-decoration:none;
  letter-spacing:.12em;
}
.ghost::before,
.ghost::after{
  content:attr(data-text);
  position:absolute;
  left:0; top:0;
  pointer-events:none;
  opacity:.55;
}
.ghost::before{
  transform:translate(1px,0);
  filter:blur(.6px);
}
.ghost::after{
  transform:translate(-1px,0);
  mix-blend-mode:screen;
  opacity:.35;
}
.ghost:hover{ text-decoration:underline; }

.ts-glitch{
  animation: ts-shift .52s linear 1;
}
@keyframes ts-shift{
  0%{ filter:none; }
  18%{ filter:saturate(1.1) contrast(1.05) hue-rotate(6deg); }
  26%{ filter:saturate(.9) contrast(1.12) hue-rotate(-8deg); }
  40%{ filter:blur(.35px); }
  100%{ filter:none; }
}

/* Search header tidy */
.nav-search{
  display:flex;align-items:center;
  padding:6px 10px;border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.78);
}
.nav-search input{
  border:0;outline:0;background:transparent;
  width:180px; max-width:24vw;
  font-size:14px;
}
@media (max-width:720px){
  .nav-search{width:100%}
  .nav-search input{width:100%}
}


/* ===== ghost blur/jitter (v3) ===== */
.ghost{
  position:relative;
  display:inline-block;
  text-decoration:none;
  letter-spacing:.10em;
  animation: ghost-jitter 1.6s steps(2,end) infinite;
}
.ghost::before,
.ghost::after{
  content:attr(data-text);
  position:absolute;
  left:0; top:0;
  pointer-events:none;
}
.ghost::before{
  opacity:.55;
  filter:blur(.8px);
  mix-blend-mode:multiply;
  animation: ghost-shift-a .9s steps(2,end) infinite;
}
.ghost::after{
  opacity:.35;
  filter:blur(.3px);
  mix-blend-mode:screen;
  animation: ghost-shift-b 1.1s steps(2,end) infinite;
}
@keyframes ghost-jitter{
  0%{ transform:translate(0,0); }
  25%{ transform:translate(0.2px,0); }
  50%{ transform:translate(-0.3px,0.1px); }
  75%{ transform:translate(0.1px,-0.2px); }
  100%{ transform:translate(0,0); }
}
@keyframes ghost-shift-a{
  0%{ transform:translate(1px,0); }
  50%{ transform:translate(0,0.3px); }
  100%{ transform:translate(1px,0); }
}
@keyframes ghost-shift-b{
  0%{ transform:translate(-1px,0); }
  40%{ transform:translate(-0.2px,-0.2px); }
  100%{ transform:translate(-1px,0); }
}

/* ===== R2 images ===== */
.heroMedia{margin:14px 0 10px}
.heroImg{width:100%; height:auto; border-radius:16px; border:1px solid var(--line); background:#f3f6f7}
.thumbImg{width:100%; height:auto; border-radius:14px; border:1px solid var(--line); background:#f3f6f7}


/* ===== Era sections ===== */
.eraSection{margin-top:18px}
.eraSection .card{overflow:hidden}
.eraSection h2{margin:0 0 10px}

/* Make images always responsive */
img{max-width:100%; height:auto}

/* Doc list responsive */
.docList{margin:0; padding-left:18px}
.docList li{margin:6px 0}

/* Mobile: stack everything, prevent overflow */
@media (max-width: 860px){
  .container{padding-left:14px; padding-right:14px}
  .grid2{grid-template-columns:1fr !important}
  .heroCard{padding:16px !important}
  .heroMedia{margin:12px 0 8px}
  .card{padding:16px !important}
  .siteHeader{position:sticky; top:0; z-index:50}
  .navRow{flex-wrap:wrap; gap:10px}
  .navLinks{flex-wrap:wrap}
  .searchMini{width:100%}
}
@media (max-width: 520px){
  .heroCard{border-radius:18px}
  .heroImg{border-radius:14px}
  .thumbImg{border-radius:14px}
  .docList{padding-left:16px}
}

/* ===== Era-specific blending for added Gallery/Downloads ===== */
/* 2016: mostly normal, slight "ズレ" and subdued border */
.era-2016 .eraSection .card{
  border-color: rgba(0,0,0,.06);
  box-shadow: 0 10px 26px rgba(0,0,0,.06);
}
.era-2016 .eraSection .thumbImg{
  filter: saturate(0.98) contrast(1.02);
}
.era-2016 .eraSection .docList a{
  text-decoration-thickness: 1px;
}

/* 2010: readability drops, spacing a bit off but still OK */
.era-2010 .eraSection{
  transform: translateX(-2px);
}
.era-2010 .eraSection .card{
  border-style:dashed;
  border-width:1px;
  border-color: rgba(0,0,0,.18);
  box-shadow:none;
}
.era-2010 .eraSection h2{
  letter-spacing: .02em;
}
.era-2010 .eraSection .thumbImg{
  filter: grayscale(.1) contrast(1.05);
}

/* 2003: layout warped, more blank feel */
.era-2003 .eraSection{
  opacity:.95;
}
.era-2003 .eraSection .card{
  border-color: rgba(0,0,0,.25);
  background: rgba(255,255,255,.82);
}
.era-2003 .eraSection .docList li{
  margin:10px 0;
}
.era-2003 .eraSection .thumbImg{
  filter: sepia(.12) contrast(1.08);
}

/* 1998: near broken, noisy + slight flicker */
@keyframes eraFlicker { 0%, 100%{opacity:1} 50%{opacity:.92} }
.era-1998 .eraSection .card{
  background: rgba(10,12,14,.55);
  border-color: rgba(255,255,255,.08);
  box-shadow:none;
}
.era-1998 .eraSection .thumbImg{
  filter: grayscale(.35) contrast(1.2) brightness(.9);
}
.era-1998 .eraSection{
  animation: eraFlicker 5.6s infinite;
}
.era-1998 .eraSection .docList a{
  color: rgba(230,240,255,.92);
  text-shadow: 0 0 1px rgba(120,160,255,.35);
}
